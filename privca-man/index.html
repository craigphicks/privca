<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Privca man - Server and Client Side Authentication - Example w/ Lighttpd, Firefox</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">Server and Client Side Authentication - Example w/ Lighttpd, Firefox</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li class="active">
                        <a href="./">Privca man</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="..">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li class="disabled">
                        <a rel="prev" >
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<!-- privca-man -->

<h2><em>privca</em> usage description</h2>

<p>To keep user required actions to a minumum, the simple bash script <em>privca</em> satisfies the following conditions:</p>

<ul>
<li>No configuration files are used, minimal command line parameters only.</li>
<li>Two levels of certificates only, no intermediate certificates.</li>
<li>Certificate file names correspond to their certificate "Common names", and leaf "common names" include their CA "common names"</li>
</ul>

<p>The program must be executed in the directory which will be used for certificate storage.<br />
Typically the directory would have the same name as the root CA common name.
The certificate file owner will be set the program executor.
All calls should made by the same executor, e.g., all as user, or all as sudo.</p>

<h5><strong>privca CreateCA &lt;<em>CA common name</em>&gt; &lt;<em>CA organization name</em>&gt;</strong></h5>

<ul>
<li>Only one CA is allowed per directory.</li>
<li>No password is used for the CA private key.  To enable it, modify the <em>privca</em> source to remove argument <em>-nodes</em> in the call to <em>openssl</em> in the function <code>CreateCA</code>.</li>
<li><strong>&lt;<em>CA common name</em>&gt;</strong> will be the CA common name parameter, which will also be used in the file name.  No spaces or non-filename characters should be used.</li>
<li><strong>&lt;<em>CA organization name</em>&gt;</strong> is only used as a category index by the Firefox browser.  If you create multiple CA's and always use the same CA organization name, then the various CA's with different common names will appear together under the shared organization name in the browser's <em>Authorities</em> list.</li>
<li>The following files will be created:<ul>
<li><strong>&lt;<em>Server common name</em>&gt;.key</strong> : the CA private key</li>
<li><strong>&lt;<em>Server common name</em>&gt;.crt</strong> : the CA public cert</li>
</ul>
</li>
</ul>

<h5><strong>privca CreateServer &lt;<em>Server common name</em>&gt; &lt;<em>subjectAltNames</em>&gt;</strong></h5>

<ul>
<li>The CA must have been already created.  It will be used.</li>
<li><strong>&lt;<em>Server common name</em>&gt;</strong> will be the sever common name parameter, and that will also be used in the filename.  No spaces or non-filename character should be used.</li>
<li>The following files will be created:<ul>
<li><strong>&lt;<em>Server common name</em>&gt;.key</strong> : server private key file </li>
<li><strong>&lt;<em>Server common name</em>&gt;.crt</strong> : server public cert</li>
<li><strong>&lt;<em>Server common name</em>&gt;.key-crt.pem</strong> : combined key and cert
  A file <strong>&lt;<em>Server common name</em>&gt;.key-crt.pem</strong> will be created.  This file needs to copied to and configured by the <em>lighttpd</em> server with the <code>ssl.pem-file</code> parameter.  It functions as the server certificate.</li>
</ul>
</li>
</ul>

<h5><strong>privca CreateClient &lt;<em>Client common name</em>&gt;</strong></h5>

<ul>
<li>The CA must have been already created.  It will be used.</li>
<li><strong>&lt;<em>Client common name</em>&gt;</strong> will be the common name parameter, and that will also be used for the filename. No spaces or non-filename character should be used.</li>
<li>The following files will be created:<ul>
<li><strong>&lt;<em>Client common name</em>&gt;.key</strong> : server private key file </li>
<li><strong>&lt;<em>Client common name</em>&gt;.crt</strong> : server public cert</li>
<li><strong>&lt;<em>Client common name</em>&gt;.pks12</strong> : combined key and cert</li>
</ul>
</li>
</ul>

<p><description markdown=1>
<summary>
An example final directory tree:
</summary></p>

<div class="highlight"><pre><span></span># tree
.
├── ca
│   ├── private
│   │   └── Root1.key
│   └── public
│       └── Root1.crt
├── export
│   ├── private
│   │   ├── Client1.p12
│   │   └── Server1.key-crt.pem
│   └── public
│       └── Root1.crt -&gt; ./ca/public/Root1.crt
├── private
│   ├── Client1.key
│   └── Server1.key
├── public
│   ├── Client1.crt
│   └── Server1.crt
└── temp
    ├── Client1.csr
    └── Server1.csr

9 directories, 11 files
</pre></div>

<p></summary></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
